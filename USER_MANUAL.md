# 図書管理システム ユーザーマニュアル

## 目次
1. [システム概要](#システム概要)
2. [ログイン・ログアウト](#ログインログアウト)
3. [ホーム画面](#ホーム画面)
4. [書籍検索・閲覧](#書籍検索閲覧)
5. [書籍の予約・借りる・返却](#書籍の予約借りる返却)
6. [貸出延長](#貸出延長)
7. [管理者機能](#管理者機能)
8. [トラブルシューティング](#トラブルシューティング)

---

## システム概要

X Capital社内の図書管理システムです。社員が書籍の検索、予約、貸出、返却を行うことができます。

### 主な機能
- 📚 書籍の検索・閲覧
- 📋 書籍の予約・貸出・返却
- ⏰ 貸出期間の延長
- 🔔 返却期限のリマインダー（Slack通知）
- 📊 貸出状況の確認
- 👨‍💼 管理者による書籍・ユーザー管理

---

## ログイン・ログアウト

### ログイン
1. ブラウザでシステムURLにアクセス
2. メールアドレスとパスワードを入力
3. 「ログイン」ボタンをクリック

**初期管理者アカウント：**
- メールアドレス: `Development@xcap.co.jp`
- パスワード: `adminpass`

### ログアウト
画面右上の「ログアウト」ボタンをクリック

---

## ホーム画面

ログイン後に表示されるメイン画面です。

### 表示内容
1. **管理者からのお知らせ**
   - 🔴 高優先度：赤背景
   - 🟡 中優先度：黄背景
   - 🔵 低優先度：青背景

2. **現在の貸出状況**
   - 借りている本の一覧
   - 返却期限の確認
   - 延長・返却ボタン

3. **予約状況**
   - 予約中の本の一覧
   - 予約順位の確認
   - **貸出可能な本は「借りる」ボタンが表示**

4. **貸出状況サマリー**
   - 現在の貸出数 / 最大貸出数
   - 貸出可能枠

5. **人気の本・新着図書**
   - よく借りられている本
   - 最近追加された本

---

## 書籍検索・閲覧

### 書籍検索
1. 画面上部の「書籍」メニューをクリック
2. 検索条件を入力：
   - **キーワード**：書籍名、著者名、キーワードで検索
   - **第1分類**：カテゴリで絞り込み
   - **第2分類**：詳細カテゴリで絞り込み
   - **貸出状況**：利用可能/貸出中で絞り込み

### 書籍詳細
書籍名をクリックすると詳細情報を確認できます：
- 書籍情報（タイトル、著者、分類、場所）
- 貸出状況
- 予約状況
- 貸出・予約ボタン

---

## 書籍の予約・借りる・返却

### 📋 予約する
1. 書籍詳細画面で「予約」ボタンをクリック
2. 予約が完了すると予約番号が表示
3. 本が利用可能になるとホーム画面に「借りる」ボタンが表示

### 📚 借りる
**方法1：書籍詳細から**
1. 書籍詳細画面で「借りる」ボタンをクリック
2. 返却期限を選択：
   - 本日
   - 1週間後
   - **2週間後（デフォルト）**
   - カスタム（任意の日付）

**方法2：予約から直接**
1. ホーム画面の予約状況で「貸出可能」表示の本
2. 「借りる」ボタンをクリック
3. 確認ダイアログで「OK」

### 📤 返却する
1. ホーム画面の貸出状況で「返却」ボタンをクリック
2. 確認ダイアログで「OK」
3. 実際の本は管理者に返却

### 制限事項
- **最大同時貸出数：3冊**
- **延滞中は新規貸出不可**
- **予約順位1番目のみ直接借りることが可能**

---

## 貸出延長

### 延長条件
- ✅ 延長は1回まで
- ✅ 延長期間：1週間または2週間
- ❌ 本に予約が入っている場合は延長不可

### 延長手順
1. ホーム画面の貸出状況で「延長」ボタンをクリック
2. 延長期間を選択（1週間/2週間）
3. 「延長」ボタンをクリック

---

## 管理者機能

管理者のみ利用可能な機能です。

### 📚 書籍管理

#### 新規書籍登録
1. 「書籍」→「書籍を追加」
2. 必要情報を入力：
   - 書籍名（必須）
   - 著者
   - 第1分類（プルダウン選択）
   - 第2分類（第1分類選択後に自動更新）
   - **配置場所（カテゴリに応じた選択肢が表示）**
   - キーワード

#### 一括インポート
1. 「書籍」→「一括インポート」
2. CSVファイルをアップロード
3. **場所とカテゴリの整合性チェック**が実行
4. エラーがあれば詳細表示、成功時に一括登録

#### 書籍編集・削除
- 書籍詳細画面から編集・削除可能

### 👥 ユーザー管理

#### 新規ユーザー登録
1. 「管理」→「ユーザー管理」→「新規ユーザー」
2. ユーザー情報を入力

#### 一括インポート
1. 「管理」→「ユーザー管理」→「一括インポート」
2. CSVファイルをアップロード

#### ユーザー編集
- ユーザー一覧から編集可能
- 最大貸出数の設定
- 管理者権限の付与

### 🗺️ カテゴリ-場所設定

#### 新規設定
1. 「管理」→「カテゴリ-場所設定」→「新規作成」
2. カテゴリと場所を設定
3. **同一カテゴリに複数の場所を設定可能**

#### 自動場所割り当て
- 書籍登録時に場所を空白にすると自動的に場所が設定
- カテゴリに対応する場所から自動選択

### 📢 お知らせ管理

#### お知らせ作成
1. 「管理」→「お知らせ管理」→「新規作成」
2. 内容を入力：
   - タイトル
   - 内容
   - **優先度（低・中・高）**
   - 表示/非表示

#### 優先度表示
- **高優先度**：赤背景で最上位表示
- **中優先度**：黄背景で中位表示
- **低優先度**：青背景で下位表示

### 📋 予約管理
1. 「管理」→「予約管理」
2. 予約一覧の確認・管理

---

## Slack通知機能

### 設定
システムが自動的にSlackアカウントを検索し、以下の通知を送信：

### 通知タイミング
1. **📅 返却期限リマインダー**
   - 返却期限の3日前に通知
   - 延長可能な場合は延長リンクも表示

2. **📚 貸出・返却確認**
   - 本を借りた時
   - 本を返却した時

3. **📋 予約関連**
   - 予約が完了した時
   - 予約していた本が利用可能になった時
   - 借りている本に新しい予約が入った時

4. **⚠️ 延長制限警告**
   - 借りている本に予約が入り、延長できない時

---

## トラブルシューティング

### よくある問題と解決方法

#### 💰 ログインできない
- メールアドレス・パスワードを確認
- 管理者に連絡してアカウント確認

#### 📚 本が借りられない
- 貸出上限（3冊）を確認
- 延滞中の本がないか確認
- 本が利用可能状態か確認

#### 📋 予約から借りられない
- 予約順位が1番目か確認
- 貸出可能枠があるか確認
- 本の状態が「利用可能」または「予約あり」か確認

#### ⏰ 延長できない
- 既に1回延長済みでないか確認
- 本に予約が入っていないか確認

#### 🔔 Slack通知が来ない
- 管理者にSlack設定を確認依頼
- メールアドレスでSlackアカウントが検索可能か確認

#### 🖥️ 500エラーが発生
- ページを再読み込み
- しばらく時間をおいてから再試行
- 管理者に連絡

#### 📱 レート制限エラー（429エラー）
- アクセス頻度が高すぎる場合に発生
- しばらく時間をおいてから再試行

---

## 連絡先

システムに関する問い合わせ：
- **開発チーム**: Development@xcap.co.jp
- **システム管理者**: 内田万彩子

---

## システム情報

- **バージョン**: 1.0
- **最終更新**: 2025年6月30日
- **対応ブラウザ**: Chrome, Firefox, Safari, Edge（最新版推奨）

---

**📚 Happy Reading! 📚**